{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HOME/Documents/GitHub/Task-management-System/Frontend/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from 'axios';\r\n\r\nimport { User } from '@/types';\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    login: (token: string, userData: User) => void;\r\n    logout: () => void;\r\n    loading: boolean;\r\n    isAuthenticated: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        const userData = localStorage.getItem('user');\r\n        if (token && userData) {\r\n            setUser(JSON.parse(userData));\r\n            axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n        }\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    const login = (token: string, userData: User) => {\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('user', JSON.stringify(userData));\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n        setUser(userData);\r\n        router.push('/dashboard');\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        delete axios.defaults.headers.common['Authorization'];\r\n        setUser(null);\r\n        router.push('/login');\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, login, logout, loading, isAuthenticated: !!user }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;;;AAFA;;;;;AAeA,MAAM,4BAAc,IAAA,yRAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oRAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,oRAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kNAAS;IAExB,IAAA,qRAAS,EAAC;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,IAAI,SAAS,UAAU;YACnB,QAAQ,KAAK,KAAK,CAAC;YACnB,MAAM,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QACtE;QACA,WAAW;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC,OAAe;QAC1B,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,MAAM,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAClE,QAAQ;QACR,OAAO,IAAI,CAAC;IAChB;IAEA,MAAM,SAAS;QACX,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,MAAM,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;QACrD,QAAQ;QACR,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,iTAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAQ;YAAS,iBAAiB,CAAC,CAAC;QAAK;kBAChF;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,sRAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}}]
}